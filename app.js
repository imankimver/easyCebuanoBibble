const bibleData = {
    "Genesis": {
        "1": 
        [
            {"verse": 1, "text": "Sa sinugdan gimugna sa Dios ang kalangitan ug ang kalibotan."},
            {"verse": 2, "text": "Ang kalibotan kaniadto wala pay porma ug hawan pa. Nalukop kini sa tubig ug gitabonan sa kangitngit. Ug ang Espiritu sa Dios nagalihok diha ibabaw sa katubigan."},
            {"verse": 3, "text": "Unya miingon ang Dios, “Mohayag!” Ug diha-diha mihayag."},
            {"verse": 4, "text": "Nakita sa Dios nga maayo ang kahayag. Unya gibulag niya ang kahayag ug ang kangitngit."},
            {"verse": 5, "text": "Gitawag niyag “adlaw” ang kahayag ug ang kangitngit gitawag niyag “gabii.” Miabot ang kagabhion, ug unya ang kabuntagon. Mao kadto ang unang adlaw."},
            {"verse": 6, "text": "Unya miingon ang Dios, “Motungha ang wanang aron nga mabahin ang tubig.”"},
            {"verse": 7, "text": "Ug gihimo sa Dios ang wanang nga nagabulag sa tubig sa ibabaw ug sa tubig sa ubos. Kini nga wanang gitawag sa Dios nga “kawanangan.” Miabot ang kagabhion, ug unya ang kabuntagon. Mao kadto ang ikaduhang adlaw."},
            {"verse": 8, "text": "Unya miingon ang Dios, “Matingob sa usa ka dapit ang tubig ubos sa kawanangan aron motungha ang malang dapit.” Ug natuman kini."},
            {"verse": 9, "text": "Gitawag niyag “yuta” ang malang dapit ug “dagat” ang natingob nga tubig. Ug nakita sa Dios nga maayo kini."},
            {"verse": 10, "text": "Unya miingon ang Dios, “Manurok sa yuta ang nagakalain-laing mga tanom—mga tanom nga may mga liso ug mga kahoy nga mamunga ug prutas nga may liso sumala sa ilang matang.” Ug nahitabo kini."},
            {"verse": 11, "text": "Nanubo sa yuta ang nagakalain-laing matang sa tanom, ug nakita sa Dios nga maayo kini."},
            {"verse": 12, "text": "Miabot ang kagabhion, ug unya ang kabuntagon. Mao kadto ang ikatulong adlaw."},
            {"verse": 13, "text": "Unya miingon ang Dios, “Motungha sa kalangitan ang mga butang nga may kahayag aron sa pagbulag sa adlaw ug sa gabii, ug mahimong ilhanan sa pagsugod sa mga panahon, mga adlaw, ug mga tuig."},
            {"verse": 14, "text": "Modan-ag sila sa kalangitan sa paghatag ug kahayag sa kalibotan.” Ug natuman kini."},
            {"verse": 15, "text": "Nahimo ang duha ka dagkong mga butang nga may kahayag: ang mas dako mao ang adlaw nga mohatag ug kahayag kon adlaw, ug ang gamay mao ang bulan nga mohatag ug kahayag kon gabii. Nahimo usab ang mga bitoon."},
            {"verse": 16, "text": "Gipahimutang sa Dios kini nga mga butang sa kalangitan sa paghatag ug kahayag sa kalibotan kon adlaw ug gabii, ug aron sa pagbulag sa kahayag ug sa kangitngit. Ug nakita sa Dios nga maayo kini."},
            {"verse": 17, "text": "Miabot ang kagabhion, ug unya ang kabuntagon. Mao kadto ang ikaupat nga adlaw."},
            {"verse": 18, "text": "Unya miingon ang Dios, “Mapuno sa nagakalain-laing mga mananap ang katubigan, ug manglupad sa kahanginan ang nagakalain-laing mga mananap.”"},
            {"verse": 19, "text": "Busa gihimo sa Dios ang dagkong mga mananap sa tubig, ug ang tanang matang sa mga mananap nga nagapuyo sa tubig, apil ang tanang matang sa mga mananap nga nagalupad. Ug nakita sa Dios nga maayo kini."},
            {"verse": 20, "text": "Unya gipanalanginan niya kining tanan nga nagaingon, “Sanay kamo ug pagdaghan, kamong mga mananap sa tubig ug mga mananap nga nagalupad.”"},
            {"verse": 21, "text": "Miabot ang kagabhion, ug unya ang kabuntagon. Mao kadto ang ikalimang adlaw."},
            {"verse": 22, "text": "Unya miingon ang Dios, “Motungha ang nagakalain-laing mga mananap diha sa yuta: ang mga hayop nga ihalas ug dili ihalas, ug mga hayop nga nagakamang.” Ug natuman kini."},
            {"verse": 23, "text": "Gibuhat sa Dios kini nga mga mananap, ug nakita niya nga maayo kini."},
            {"verse": 24, "text": "Unya miingon ang Dios, “Magbuhat kita ug tawo nga sama kanato. Gamhan nila ang tanang matang sa mga mananap: ang nagapuyo sa tubig, ang nagalupad, ang nagalakaw, ug ang nagakamang.”"},
            {"verse": 25, "text": "Busa gimugna sa Dios ang tawo, lalaki ug babaye, nga sama kaniya."},
            {"verse": 26, "text": "Ug gipanalanginan niya sila nga nagaingon, “Panganak kamo ug daghan aron malukop sa inyong kaliwatan ang kalibotan. Dumalaha ninyo kini ug kamo ang magmando sa tanang matang sa mananap.”"},
            {"verse": 27, "text": "Unya miingon ang Dios, “Gihatag ko kaninyo ang tanang mga tanom nga adunay liso ug tanang bunga sa mga kahoy ingon nga inyong pagkaon."},
            {"verse": 28, "text": "Ug gihatag ko usab sa tanang mga mananap ang tanang lunhawng tanom ingon nga ilang pagkaon.” Ug natuman kini."},
            {"verse": 29, "text": "Gitan-aw sa Dios ang tanan niyang gibuhat ug nakita niya nga maayo gayod kini."},
            {"verse": 30, "text": "Miabot ang kagabhion, ug unya ang kabuntagon. Mao kadto ang ikaunom nga adlaw."},
            {"verse": 31, "text": "Unya ang Dios miingon, “Maayo gayod ang tanan nga gibuhat ko.” Ug miabot ang kagabhion, ug unya ang kabuntagon. Mao kadto ang ikapito nga adlaw."}
        ],
        "2": [
            {"verse": 1, "text": "Thus the heavens and the earth were completed in all their vast array."},
            {"verse": 2, "text": "By the seventh day God had finished the work he had been doing; so on the seventh day he rested from all his work."},
            {"verse": 3, "text": "Then God blessed the seventh day and made it holy, because on it he rested from all the work of creating that he had done."},
            {"verse": 4, "text": "This is the account of the heavens and the earth when they were created, when the Lord God made the earth and the heavens."},
            // Add more verses as needed
        ],
        // Add more chapters and verses for Genesis
    },
    "Exodus": {
        "1": [
            {"verse": 1, "text": "These are the names of the sons of Israel who went to Egypt with Jacob, each with his family:"},
            {"verse": 2, "text": "Reuben, Simeon, Levi and Judah;"},
            // Add more verses as needed
        ],
        // Add more chapters and verses for Exodus
    },
    // Add more books with their respective chapters and verses
};

document.addEventListener("DOMContentLoaded", function() {
    const booksDropdown = document.getElementById("booksDropdown");
    const booksContainer = document.getElementById("booksContainer");
    const chaptersDropdown = document.getElementById("chaptersDropdown");
    const chaptersContainer = document.getElementById("chaptersContainer");
    const startVerseInput = document.getElementById('startVerse');
    const fetchButton = document.getElementById('fetchButton');
    const allVersesButton = document.getElementById('allVersesButton');
    const verseDisplay = document.getElementById('verseDisplay');
    const nextButton = document.getElementById('nextButton');
    const darkModeToggle = document.getElementById('darkModeToggle');

    // Toggle display of books dropdown
    booksDropdown.addEventListener("click", function() {
        booksContainer.classList.toggle("show");
        // Close chapters dropdown if open
        chaptersContainer.classList.remove("show");
    });

    // Populate books dropdown
    for (let book in bibleData) {
        let item = document.createElement("a");
        item.innerText = book;
        item.href = "#";
        item.onclick = (e) => {
            e.preventDefault();
            displayChapters(book);
            booksContainer.classList.remove("show");
            booksDropdown.innerText = book;
        };
        booksContainer.appendChild(item);
    }

    // Toggle display of chapters dropdown
    chaptersDropdown.addEventListener("click", function() {
        chaptersContainer.classList.toggle("show");
        // Close books dropdown if open
        booksContainer.classList.remove("show");
    });

    // Close dropdowns if the user clicks outside of them
    window.addEventListener("click", function(event) {
        if (!event.target.matches('.dropdown-button')) {
            var dropdowns = document.getElementsByClassName("dropdown-content");
            Array.from(dropdowns).forEach(function(openDropdown) {
                if (openDropdown.classList.contains('show')) {
                    openDropdown.classList.remove('show');
                }
            });
        }
    });

    // Fetch verses based on user input
    fetchButton.addEventListener('click', function() {
        const selectedBook = booksDropdown.innerText.trim();
        const selectedChapter = chaptersDropdown.innerText.trim().replace('Chapter ', '');
        const startVerse = parseInt(startVerseInput.value);

        fetchVerse(selectedBook, selectedChapter, startVerse);
    });

    // Display all verses in the chapter
    allVersesButton.addEventListener('click', function() {
        const selectedBook = booksDropdown.innerText.trim();
        const selectedChapter = chaptersDropdown.innerText.trim().replace('Chapter ', '');

        fetchVerse(selectedBook, selectedChapter);
    });

    // Next verse button
    nextButton.addEventListener('click', function() {
        const selectedBook = booksDropdown.innerText.trim();
        const selectedChapter = chaptersDropdown.innerText.trim().replace('Chapter ', '');
        let startVerse = parseInt(startVerseInput.value);

        // Increment startVerse
        startVerse++;

        // Fetch the next verse
        fetchVerse(selectedBook, selectedChapter, startVerse);

        // Update startVerse input value
        startVerseInput.value = startVerse;
    });

    // Dark mode toggle button
    darkModeToggle.addEventListener('click', function() {
        document.body.classList.toggle('dark-mode');
        document.querySelector('.container').classList.toggle('dark-mode');
        document.querySelectorAll('.dropdown-button').forEach(button => button.classList.toggle('dark-mode'));
        document.querySelector('.verse-input').classList.toggle('dark-mode');
        document.querySelector('.verse-display').classList.toggle('dark-mode');
        document.querySelector('.next-button').classList.toggle('dark-mode');
        document.querySelector('.dark-mode-toggle').classList.toggle('dark-mode');
    });
});

function displayChapters(book) {
    const chaptersContainer = document.getElementById("chaptersContainer");
    chaptersContainer.innerHTML = ""; // Clear previous chapters

    // Check if the book exists in the bibleData object
    if (bibleData.hasOwnProperty(book)) {
        for (let chapter in bibleData[book]) {
            let item = document.createElement("a");
            item.innerText = `Chapter ${chapter}`;
            item.href = "#";
            item.onclick = (e) => {
                e.preventDefault();
                fetchVerse(book, chapter, 1); // Default to first verse of the chapter
                chaptersContainer.classList.remove("show");
                chaptersDropdown.innerText = `Chapter ${chapter}`;
            };
            chaptersContainer.appendChild(item);
        }
    }

    chaptersDropdown.disabled = false;
}

function fetchVerse(book, chapter, startVerse) {
    const verseDisplay = document.getElementById('verseDisplay');
    verseDisplay.innerHTML = ""; // Clear previous verses

    // Check if the book and chapter exist in the bibleData object
    if (bibleData.hasOwnProperty(book) && bibleData[book].hasOwnProperty(chapter)) {
        let versesData = bibleData[book][chapter];
        let versesHtml = `<h2>${book} ${chapter}:${startVerse}</h2>`;

        // Check if startVerse is provided and is valid integer
        if (startVerse && Number.isInteger(startVerse)) {
            startVerse = parseInt(startVerse);

            // Display the verse if it exists
            if (versesData[startVerse - 1]) {
                versesHtml += `<p><strong>${versesData[startVerse - 1].verse}</strong> ${versesData[startVerse - 1].text}</p>`;
            } else {
                versesHtml += `<p>Verse not found.</p>`;
            }
        }

        verseDisplay.innerHTML = versesHtml;
    } else {
        verseDisplay.innerHTML = `<p>Book or chapter not found.</p>`;
    }
}